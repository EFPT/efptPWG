---
title: "Psychotherapy Study"
author: "Roberts Klotins and Thomas Gargot"
date: "February, 28th 2016"
output: html_document
---

# Presentation
The psychotherapy study run from 2013 to 2015 to understand the actual opportunities and wishes for training in psychotherapy in Europe among psychiatrist trainees in 19 countries.

## Presentations of the survey
### Past
* "The EFPT Psychotherapy working Group and its Survey on Psychotherapy Training 2013-2015" was presented at the [Royal College of Psychiatrists](http://www.rcpsych.ac.uk/pdf/CALC_MedPsych2015confbooklet.pdf) - faculty of Psychotherapy Annual Meeting 22-24 April 2015 by Alina Petricean (UK, Romania)
* "The EFPT Psychotherapy working group" was presented at the "Portuguese Psychiatric National Congress by Rita Silva (Portugal)

### Projects
* Accepted talk : "Should all psychiatrists be skilled to practice psychotherapy ? Thomas GARGOT (France) and Ekin S??nmez (Turkey), [European Psychiatric Association Congress](http://efpt.eu/events/european-psychiatric-association-congress/), March 12th - March 15th 2016 
* Submission Project : "How psychiatrist trainees are trained in Psychotherapies in Europe ? A European trainee survey", Thomas GARGOT (France), [European Association of Behavioural and Cognitive Therapies conference (EABCT)](http://eabct2016.org/), August 31st - September 3rd 2016
* Submission Project : How psychiatrist trainees are trained in Psychotherapies in Europe ? A European trainee survey" in Italian, Diego Quattrone (Italy)  [Italian Federation of Psychotherapy Associations (FIAP)](http://www.fiap.info/convegno2016/)

# To do list
It can be found [here](https://github.com/r0bis/efptPWG/blob/master/about-data/todolist.md)

# Actual recommandations
## EFPT Psychotherapy Working Group statement
A working knowledge of psychotherapy is an integral part of being a psychiatrist and this must be reflected in training in psychiatry. All trainees must gain the knowledge, skills and attitudes to be competent in psychotherapy. Competence should be gained in at least one recognised form of psychotherapy (of the trainees choice) and basic knowledge should be gained in the other forms of psychotherapy to allow the trainee to evaluate suitability for referral to specialist psychotherapist.
Training in psychotherapy must include supervision by qualified therapists. A personal psychotherapeutic experience is seen as a valuable component of training. It is crucial that trainees have access to relevant psychotherapy experience to cater to the needs of the appropriate patient group that the trainee is dealing with or is expected to deal with in the future.

Relevant training authorities should ensure that time, resources and funding are available to all trainees to meet the above mentioned psychotherapy training needs.

Discussed and voted by EFPT delegates in Lisbon 1996, Tampere 1999, Napoli 2001, Sinaia 2002, Paris 2003, Istanbul 2005, Gothenburg 2008, Cambridge 2009 and Zurich 2013

[See all EFPT statements](http://efpt.eu/statements/)

## UEMS Psychotherapy Reports
See all UEMS reports related to [psychiatry training](http://uemspsychiatry.org/board/training-reports/)

# Data storage
The data is stored on [GitHub](https://github.com/r0bis/efptPWG)

```{r include = FALSE}
# Import libraries
# install.packages(c("lattice", "ggplot2", "likert", "rmarkdown""))
library (lattice)
library(ggplot2)
library(knitr)
library(likert)
library(plyr)
library(rmarkdown)
library(stringr)
search()
```

# Example with Czech Republic data
## Download the data
This command tells us which the current directory is:
```{r} 
getwd()
```

Here we tell R where we want it to work from:
```{r} 
#setwd("/Users/Ofix/src/efptPWG/")
setwd("~/src/efptPWG/bin")
```

## Import the data and change the variables names
R will execute all commands in the syntax file
```{r}
readEFPTfiles <- function(f) {
  if (as.character(f)!="") {
    oldwd <- getwd()
    setwd(file.path("..","data",f))
    source(paste(f,"_R_syntax_file.R",sep = ""),local = T)
    toGlEnvFrame <- data[str_detect(colnames(data),"^id$|^q_.*")]
    parentFrame <- paste(f,"_data",sep = "")
    assign(parentFrame,toGlEnvFrame,envir=.GlobalEnv)
    setwd(oldwd)
    }
  else {print("")}
}

dat.files  <- list.files(path="..", recursive=F, pattern=".*syntax_file.R$",full.names=F)
dat.dirs  <- list.dirs(path="../data/", recursive=T,full.names=F)

sapply(dat.dirs, readEFPTfiles)

correctColumns <- colnames(Bulgaria_data)
incorrectColumns <- colnames(Czech_Republic_data)
setdiff(correctColumns,incorrectColumns)

Czech_Republic_data["q_0000"] <- as.factor("Czech Republic")
Czech_Republic_data["q_0012_other"] <- as.numeric(NA)
Czech_Republic_data <- Czech_Republic_data[colnames(Bulgaria_data)]
Slovenia_data["q_0000"] <- as.factor("Slovenia")
Slovenia_data["q_0012_other"] <- as.numeric(NA)
Slovenia_data <- Slovenia_data[colnames(Bulgaria_data)]
```


### List of countries studied
```{r}
list <- list.files("data", full.names=FALSE)
list
```

### Binding datasets
```{r}
listof.df <- lapply(ls(), function(x) if (class(get(x)) == "data.frame") get(x))
data_Europe <- do.call("rbind", listof.df)
```

## Display them
```{r, include =FALSE} 
str(Czech_Republic_data)
```

## Gender
```{r}
table(Czech_Republic_data$q_0001)
```

```{r}
pie(table(Czech_Republic_data$q_0001), main ="Gender of participants")
```

## Age
```{r}
summary(Czech_Republic_data$q_0002)

hist(Czech_Republic_data$q_0002, col="orange",
     xlab="Age",
     ylab="Number",
     main="Age distribution",
     border=NA,
     breaks=c(seq(20,60,2)))
```

## Year in Training (now the shorter labels fit in the plot)
```{r}
table(Czech_Republic_data$q_0003)
barplot(table(Czech_Republic_data$q_0003), ylim = c(0,15), main="Year of training", xlab="Year", las=1, col="cornflowerblue", border=NA, ylab="Number")
```

## Are you receiving personal psychotherapy or have you received it in the past?

```{r}
# TODO : GGPLOT this : http://docs.ggplot2.org/current/geom_bar.html
Czech_Republic_data[, 7] <- as.numeric(Czech_Republic_data[, 7])
attributes(Czech_Republic_data)$variable.labels[7] <- "Are you receiving personal psychotherapy or have you received it in the past?"
Czech_Republic_data[, 7] <- factor(Czech_Republic_data[, 7], levels=c(1,2),labels=c("Yes","No"))
names(Czech_Republic_data)[7] <- "q_0004"
table(Czech_Republic_data$q_0004)
pie(table(Czech_Republic_data$q_0004), xlab="Receiving personal psychotherapy (present or past)")
```

## I am undertaking training in Psychotherapy within my training programme in Psychiatry
```{r}
#tab <- table(Czech_Republic_data$q_0005_S05A1)
#pie(tab)
#pie(table(Czech_Republic_data$q_0005_S05A1))
 #   , xlab="In a Psychotherapy training within my training programme")
```

## I am undertaking training in Psychotherapy on my own initiative
```{r}
table(Czech_Republic_data$q_0005_S05A2)
pie(table(Czech_Republic_data$q_0005_S05A2), 
  xlab="Training in Psychotherapy outside my training programme")
```

## I am not undertaking any training in Psychotherapy
```{r}
table(Czech_Republic_data$q_0005_S05A3)
pie(table(Czech_Republic_data$q_0005_S05A3), 
  xlab="I am not undertaking any training in Psychotherapy")
```
> Psychotherapy training taking place within working hours is recommended by UEMS as a mandatory component of curriculum.

## I have completed full training in a Psychotherapy specialty in the past
```{r}
table(Czech_Republic_data$q_0005_S05A4)
pie(table(Czech_Republic_data$q_0005_S05A4), xlab="Completed a full training in a Psychotherapy (past)")
```

## I am training in some modality
```{r}
table(is.na(Czech_Republic_data$q_0006))
pie(table(is.na(Czech_Republic_data$q_0006)),xlab="I am training in some modality of psychotherapy")
```

## Is psychotherapy important for your identity as a psychiatrist ?
```{r}
table(Czech_Republic_data$q_0007)
pie(table(Czech_Republic_data$q_0007), xlab="Psychotherapy important for the professional identity")
```

## Do you want to practise Psychotherapy ?
```{r}
table(Czech_Republic_data$q_0008)
pie(table(Czech_Republic_data$q_0008), xlab="Plan to practise Psychotherapy after training")
```

```{r}
q9df <- Czech_Republic_data[,16:21]
barplot(c(sum(q9df[,1]=="Yes"), sum(q9df[,2]=="Yes"), sum(q9df[,3]=="Yes"), sum(q9df[,4]=="Yes"),
         sum(q9df[,5]=="Yes"), sum(!is.na(q9df[,6]))),
        names.arg=c("Dynamic","CBT","Systemic","Group","NOT ANY","Other"),xlab="Interested in this therapy")
```


##"The following experience in Psychotherapy is a mandatory part of my training in Psychiatry:"

```{r}
table(Czech_Republic_data$q_0011_SQ001)
barplot(table(Czech_Republic_data$q_0011_SQ001), col="green", xlab="Theoretical lectures or seminars in Psychotherapy")
abline(v=1.3, lwd=3)
text(0.6,5, "UEMS <", adj = c(0, -.1))
```

> UEMS Charter on Psychiatry states that minimum duration of theoretical psychotherapy training should be 120 hours during 5 years. It also states that as a minimum, psychodynamic, CBT and systemic theory should be taught.

```{r}
table(Czech_Republic_data$q_0011_SQ001)
barplot(table(Czech_Republic_data$q_0011_SQ001), col="blue", xlab="Conducting Psychotherapy without supervision")
```

```{r}
table(Czech_Republic_data$q_0011_SQ003)
barplot(table(Czech_Republic_data$q_0011_SQ003), col="yellow", xlab="Conducting Psychotherapy under supervision")
```

```{r}
table(Czech_Republic_data$q_0011_SQ004)
barplot(table(Czech_Republic_data$q_0011_SQ004), col="orange", xlab="Personal Psychotherapy")
```

```{r}
table(Czech_Republic_data$q_0012)
barplot(table(Czech_Republic_data$q_0012), col="green", xlab="Are you qualified to practice Psychotherapy after your training ?")
```

## What types of psychotherapy modalities are available for treatment of patients at your institution?
> table(Czech_Republic_data$q_0013)

## Plot: How many hours of supervisions
```{r}
hist(Czech_Republic_data$q_0014_SQ001, col="pink",
     xlab="Hours of Psychotherapy supervision per month",
     main = "Individual supervision",
     breaks=6)
abline(v=1.7, lwd=3)
text(1.75,5, "> UEMS", adj = c(0, -.1))
```

> UEMS Charter on Psychiatry states that minimum duration of psychotherapy supervision should be 100 hours during the whole training of 5 recommended years. It makes 1.7 hours approximatively a month.

temp <- c("Czech_Republic_data$q_0014_SQ002","Czech_Republic_data$q_0014_SQ003","Czech_Republic_data$q_0014_SQ004")
 ???        ??????
par(mfrow=c(1,3))
      ???                        ???       ???             ???
for(i in temp) barplot(table(mhp.ex[,i]), main=i, ylab="n", space=0.8, 
    ???
col="white")


```{r}
hist(Czech_Republic_data$q_0014_SQ002, col="red",
     main="Small group supervision (3 - 5 people)",
     xlab="Hours of Psychotherapy supervision per month")
```

```{r}
hist(Czech_Republic_data$q_0014_SQ003,
     main="Large group supervision (more than 5 people)",
     xlab="Hours of Psychotherapy supervision per month",
     col= "orange")
```

```{r}
hist(Czech_Republic_data$q_0014_SQ004, col="green",
     xlab= "Hours of Psychotherapy supervision per month",
     main ="Generic Balint group",
     breaks=10)
```

```{r}
hist(Czech_Republic_data$q_0014_SQ005, col="navy",
     xlab= "Hours of Psychotherapy supervision per month",
     main ="Other form of supervision")
```

table(Czech_Republic_data$q_0015)

## Plot: Who pays?
This again should ba a plot group on one page
```{r}
barplot(table(Czech_Republic_data$q_0016_SQ001), col="light blue",
        main="Theorectical lectures / seminars",
        xlab="Who pays for this component of Psychotherapy experience?")
```

```{r}
barplot(table(Czech_Republic_data$q_0016_SQ002), col="light blue",
        xlab="Who pays for this component of Psychotherapy experience?",
        main="Supervision - individual")
```

```{r}
barplot(table(Czech_Republic_data$q_0016_SQ003), col="light blue",
        main="Supervision - group",
        xlab="Who pays ?")
```

```{r}
barplot(table(Czech_Republic_data$q_0016_SQ004), col="light blue",
        main="Balint groups ",
        xlab="Who pays ?")
```

```{r}
barplot(table(Czech_Republic_data$q_0016_SQ004), col="light blue",
        main="Sessions with patient(s)",
        xlab="Who pays ?")
```

```{r}
barplot(table(Czech_Republic_data$q_0016_SQ004), col="light blue",
        main="Self-experience",
        xlab="Who pays")
```

## Plot: Would you train for Free ?
```{r}
pie(table(Czech_Republic_data$q_0017),
    xlab="Motivated to train in Psychotherapy for free?")
```

UEMS recommendations states that psychotherapy training of trainees should be funded publicly and free for trainees.

## Plot: How much would you invest in psychotherapy training ?
```{r}
hist(Czech_Republic_data$q_0018, col="light green",
     main="% of annual salary for psychiatry training",
     xlab="Percentage of your annual salary do you intend to spend \n on funding your psychotherapy training In the next 12 months?",
     breaks=c(seq(0,100,2)))
```

## Plot: Satisfaction group
perhaps we should use likert package to plot likert type items

```{r}
# make auxiliary table to hold our likert Czech_Republic_data
sat1<-Czech_Republic_data[,43:45]
# put in correct row names
sat1 <- rename(sat1,c("q_0019_SQ001"="I am satisfied with psychotherapy component in my training programme",
  "q_0019_SQ002"="I am satisfied with psychotherapy training options in my country",
  "q_0019_SQ003"="I am satisfied with the level of funding for psychotherapy training within psychiatry in my country"
  ))
sat12<-likert(sat1)
plot(sat12)
# comment out barplots for now
# barplot(table(Czech_Republic_data$q_0019_SQ001), main ="I am satisfied with Psychotherapy component in my training programme")

# well, let's deal with UEMS bits as with likert scales
uems1 <- Czech_Republic_data[,46:54]
uems1[,1] <- factor(uems1[,1],c("No","Uncertain","Yes"))
uems1[,2] <- factor(uems1[,2],c("No","Uncertain","Yes"))
uems1[,3] <- factor(uems1[,3],c("No","Uncertain","Yes"))
uems1[,4] <- factor(uems1[,4],c("No","Uncertain","Yes"))
uems1[,5] <- factor(uems1[,5],c("No","Uncertain","Yes"))
uems1[,6] <- factor(uems1[,6],c("No","Uncertain","Yes"))
uems1[,7] <- factor(uems1[,7],c("No","Uncertain","Yes"))
uems1[,8] <- factor(uems1[,8],c("No","Uncertain","Yes"))
uems1[,9] <- factor(uems1[,9],c("No","Uncertain","Yes"))
# Put nice column names for the plot
uems1 <- rename(uems1,c(
  q_0021_SQ001="Psychotherapy is a mandatory part of the curriculum",
  q_0021_SQ002="Defined number of cases should be seen",
  q_0021_SQ003="at least 120 hours of theory",
  q_0021_SQ004="Work experience with individuals, family, groups",
  q_0021_SQ005="Psychodynamic, CBT, systemic - and maybe integrative",
  q_0021_SQ006="Personal therapy is recommended",
  q_0021_SQ007="Supervisors should be qualified",
  q_0021_SQ008="Regular supervision at least for 100 hours",
  q_0021_SQ009="Training should be publicly funded"
  ))
## Plot: UEMS recs awareness
uems12 <- likert(uems1)
plot(uems12) +
  ggtitle("Awareness of UEMS recommendations") +
  theme(plot.title = element_text(lineheight=.8, face="bold"))
```

## Plot: UEMS recommendations awareness
```{r}
# and same with the
uems2 <- Czech_Republic_data[,55:63]
uems2[,1] <- factor(uems2[,1],c("No","Uncertain","Yes"))
uems2[,2] <- factor(uems2[,2],c("No","Uncertain","Yes"))
uems2[,3] <- factor(uems2[,3],c("No","Uncertain","Yes"))
uems2[,4] <- factor(uems2[,4],c("No","Uncertain","Yes"))
uems2[,5] <- factor(uems2[,5],c("No","Uncertain","Yes"))
uems2[,6] <- factor(uems2[,6],c("No","Uncertain","Yes"))
uems2[,7] <- factor(uems2[,7],c("No","Uncertain","Yes"))
uems2[,8] <- factor(uems2[,8],c("No","Uncertain","Yes"))
uems2[,9] <- factor(uems2[,9],c("No","Uncertain","Yes"))

# Put nice column names for the plot
uems2 <- rename(uems2,c(
  q_0022_SQ001="Psychotherapy is a mandatory part of the curriculum",
  q_0022_SQ002="Defined number of cases should be seen",
  q_0022_SQ003="at least 120 hours of theory",
  q_0022_SQ004="Work experience with individuals, family, groups",
  q_0022_SQ005="Psychodynamic, CBT, systemic - and maybe integrative",
  q_0022_SQ006="Personal therapy is recommended",
  q_0022_SQ007="Supervisors should be qualified",
  q_0022_SQ008="Regular supervision at least for 100 hours",
  q_0022_SQ009="Training should be publicly funded"
))
uems22 <- likert(uems2)
plot(uems22) +
  ggtitle("Actual implementation in the country") +
  theme(plot.title = element_text(lineheight=.8, face="bold"))
```

## Research
UEMS recommendations states that research methodology should be included in psychotherapy training.

## Bibliography
* Please join our [zotero group](https://www.zotero.org/groups/480046)

